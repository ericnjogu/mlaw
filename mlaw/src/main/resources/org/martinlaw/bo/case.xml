<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans         
http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
	<!-- Copyright 2010-2011 Protosoft Ltd Licensed under the Educational Community 
		License, Version 2.0 (the "License"); you may not use this file except in 
		compliance with the License. You may obtain a copy of the License at http://www.opensource.org/licenses/ecl2.php 
		Unless required by applicable law or agreed to in writing, software distributed 
		under the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES 
		OR CONDITIONS OF ANY KIND, either express or implied. See the License for 
		the specific language governing permissions and limitations under the License. -->
	<bean id="case" parent="case-parentBean" />

	<bean id="case-parentBean" abstract="true" parent="BusinessObjectEntry">
		<property name="businessObjectClass" value="org.martinlaw.bo.CourtCase" />
		<property name="inquiryDefinition">
			<ref bean="case-inquiryDefinition" />
		</property>
		<property name="lookupDefinition">
			<ref bean="case-lookupDefinition" />
		</property>
		<property name="titleAttribute" value="localReference" />
		<property name="attributes">
			<list>
				<ref bean="case-id" />
				<ref bean="courtcase-name" />
				<ref bean="courtcase-statusId" />
				<ref bean="courtcase-status" />
				<ref bean="case-localReference" />
				<ref bean="case-courtReference" />
			</list>
		</property>
		<property name="boNotesEnabled" value="true" />
		<!-- TODO add relationship(s) to status, client, witness etc -->

		<property name="relationships">
			<list>
				<!-- 
				This may have been taken care of using ojb mapping
				<bean parent="RelationshipDefinition">
					<property name="objectAttributeName" value="status" />
					<property name="targetClass" value="org.martinlaw.bo.CourtCaseStatus" />
					<property name="primitiveAttributes">
						<list>
							<bean parent="PrimitiveAttributeDefinition" p:sourceName="statusId"
								p:targetName="id" />
						</list>
					</property>
				</bean> -->
				<!-- 
				<bean parent="RelationshipDefinition">
					<property name="objectAttributeName" value="annexes" />
					<property name="targetClass" value="org.martinlaw.bo.CaseAnnex" />
					<property name="primitiveAttributes">
						<list>
							<bean parent="PrimitiveAttributeDefinition" p:sourceName="id"
								p:targetName="courtCaseId" />
						</list>
					</property>
				</bean>
				 -->
			</list>
		</property>

		<property name="objectLabel" value="name" />
	</bean>

	<!-- Attribute Definitions -->

	<bean id="case-id" parent="case-id-parentBean" />

	<bean id="case-id-parentBean" abstract="true" parent="AttributeDefinition">
		<property name="forceUppercase" value="false" />
		<property name="shortLabel" value="Id" />
		<property name="maxLength" value="20" />
		<property name="validationPattern">
			<bean parent="AnyCharacterValidationPattern" />
		</property>
		<property name="control">
			<bean parent="TextControlDefinition" p:size="20" />
		</property>
		<property name="summary" value="Court Case Id" />
		<property name="name" value="id" />
		<property name="label" value="Court Case Id" />
		<property name="description" value="Court Case Id" />
		<property name="controlField">
      <bean parent="Uif-TextControl" p:size="20" p:readOnly="true"/>
    </property>
	</bean>

	<bean id="case-localReference" parent="case-localReference-parentBean" />

	<bean id="case-localReference-parentBean" abstract="true"
		parent="AttributeDefinition">
		<property name="forceUppercase" value="true" />
		<property name="shortLabel" value="Ref Num" />
		<property name="maxLength" value="20" />
		<property name="validationPattern">
			<bean parent="AnyCharacterValidationPattern" />
		</property>
		<property name="control">
			<bean parent="TextControlDefinition" p:size="20" />
		</property>
		<property name="required" value="true" />
		<property name="summary" value="Reference Number" />
		<property name="name" value="localReference" />
		<property name="label" value="Reference Number" />
		<property name="description" value="Local Reference Number" />
		<property name="controlField">
      <bean parent="Uif-TextControl" p:size="20"/>
    </property>
	</bean>

	<bean id="case-courtReference" parent="case-courtReference-parentBean" />

	<bean id="case-courtReference-parentBean" abstract="true"
		parent="AttributeDefinition">
		<property name="forceUppercase" value="true" />
		<property name="shortLabel" value="Case Number" />
		<property name="maxLength" value="20" />
		<property name="validationPattern">
			<bean parent="AnyCharacterValidationPattern" /> <!-- p:allowWhitespace="true"/> -->
		</property>
		<property name="control">
			<bean parent="TextControlDefinition" p:size="20" />
		</property>
		<property name="summary" value="Court Case Number" />
		<property name="name" value="courtReference" />
		<property name="label" value="Court Case Number" />
		<property name="description" value="Court Case Number" />
		<property name="controlField">
      <bean parent="Uif-TextControl" p:size="20"/>
    </property>
	</bean>

	<bean id="courtcase-name" parent="courtcase-name-parentBean" />

	<bean id="courtcase-name-parentBean" abstract="true"
		parent="AttributeDefinition">
		<property name="forceUppercase" value="false" />
		<property name="shortLabel" value="Case Name" />
		<property name="maxLength" value="150" />
		<property name="validationPattern">
			<bean parent="AnyCharacterValidationPattern" p:allowWhitespace="true" />
		</property>
		<property name="control">
			<bean parent="TextControlDefinition" p:size="100" />
		</property>
		<property name="summary" value="Case Name" />
		<property name="name" value="name" />
		<property name="label" value="Case Name" />
		<property name="description" value="Case Name" />
		<property name="controlField">
      <bean parent="Uif-TextControl" p:size="100"/>
    </property>
	</bean>

	<bean id="courtcase-statusId" parent="courtcase-statusId-parentBean" />

	<bean id="courtcase-statusId-parentBean" abstract="true"
		parent="AttributeDefinition">
		<property name="forceUppercase" value="true" />
		<property name="shortLabel" value="Status" />
		<property name="maxLength" value="100" />
		<property name="validationPattern">
			<bean parent="AnyCharacterValidationPattern" p:allowWhitespace="true" />
		</property>
		<property name="control">
			<bean parent="SelectControlDefinition" p:businessObjectClass="org.martinlaw.bo.CourtCaseStatus"
				p:valuesFinderClass="org.kuali.rice.krad.keyvalues.PersistableBusinessObjectValuesFinder"
				p:includeKeyInLabel="false" p:includeBlankRow="true" p:keyAttribute="id"
				p:labelAttribute="status" />
		</property>
		<property name="summary" value="Case Status" />
		<property name="name" value="statusId" />
		<property name="label" value="Case Status" />
		<property name="description" value="Case Status" />
	</bean>

	<!-- for displaying on the inquiry/lookup results -->
	<bean id="courtcase-status" parent="case-status-text">
		<property name="name" value="status.status" />
	</bean>

	<!-- Business Object Inquiry Definition -->

	<bean id="case-inquiryDefinition" parent="case-inquiryDefinition-parentBean" />

	<bean id="case-inquiryDefinition-parentBean" abstract="true"
		parent="InquiryDefinition">
		<property name="inquirySections">
			<list>
				<bean parent="InquirySectionDefinition">
					<property name="numberOfColumns" value="1" />
					<property name="inquiryFields">
						<list>
							<bean parent="FieldDefinition" p:attributeName="name" />
							<bean parent="FieldDefinition" p:attributeName="localReference" />
							<bean parent="FieldDefinition" p:attributeName="courtReference" />
							<!-- TODO find out how to display label -->

							<bean parent="FieldDefinition" p:attributeName="status.status" />

						</list>
					</property>
					<property name="title" value="References" />
				</bean>

				<!-- collections -->

				<bean parent="InquirySectionDefinition">
					<property name="title" value="Hearing Dates" />
					<property name="defaultOpen" value="true" />
					<property name="numberOfColumns" value="1" />
					<property name="inquiryFields">
						<list>
							<bean parent="InquiryCollectionDefinition">
								<property name="attributeName" value="hearingDates" />
								<property name="businessObjectClass" value="org.martinlaw.bo.HearingDate" />
								<property name="numberOfColumns" value="2" />
								<property name="inquiryFields">
									<list>
										<bean parent="FieldDefinition" p:attributeName="date" />
										<bean parent="FieldDefinition" p:attributeName="comment" />
									</list>
								</property>
							</bean>
						</list>
					</property>
				</bean>

				<bean parent="InquirySectionDefinition">
					<property name="title" value="Clients" />
					<property name="defaultOpen" value="true" />
					<property name="numberOfColumns" value="1" />
					<property name="inquiryFields">
						<list>
							<bean parent="InquiryCollectionDefinition">
								<property name="attributeName" value="clients" />
								<property name="businessObjectClass" value="org.martinlaw.bo.CourtCaseClient" />
								<property name="numberOfColumns" value="1" />
								<property name="inquiryFields">
									<list>
										<bean parent="FieldDefinition" p:attributeName="principalName" />
									</list>
								</property>
							</bean>
						</list>
					</property>
				</bean>

				<bean parent="InquirySectionDefinition">
					<property name="title" value="Fees Received" />
					<property name="defaultOpen" value="true" />
					<property name="numberOfColumns" value="1" />
					<property name="inquiryFields">
						<list>
							<bean parent="InquiryCollectionDefinition">
								<property name="attributeName" value="fees" />
								<property name="businessObjectClass" value="org.martinlaw.bo.Fee" />
								<property name="numberOfColumns" value="3" />
								<property name="inquiryFields">
									<list>
										<bean parent="FieldDefinition" p:attributeName="date" />
										<bean parent="FieldDefinition" p:attributeName="description" />
										<bean parent="FieldDefinition" p:attributeName="amount" />
									</list>
								</property>
							</bean>
						</list>
					</property>
				</bean>

				<bean parent="InquirySectionDefinition">
					<property name="title" value="Witnesses" />
					<property name="defaultOpen" value="true" />
					<property name="numberOfColumns" value="1" />
					<property name="inquiryFields">
						<list>
							<bean parent="InquiryCollectionDefinition">
								<property name="attributeName" value="witnesses" />
								<property name="businessObjectClass" value="org.martinlaw.bo.CourtCaseWitness" />
								<property name="numberOfColumns" value="1" />
								<property name="inquiryFields">
									<list>
										<bean parent="FieldDefinition" p:attributeName="principalName" />
									</list>
								</property>
							</bean>
						</list>
					</property>
				</bean>

			</list>
		</property>
		<property name="title" value="Court Case Inquiry" />
	</bean>

	<!-- Business Object Lookup Definition -->


	<bean id="case-lookupDefinition" parent="case-lookupDefinition-parentBean" />

	<bean id="case-lookupDefinition-parentBean" abstract="true"
		parent="LookupDefinition">

		<property name="defaultSort">
			<bean parent="SortDefinition">
			</bean>
		</property>
		<property name="lookupFields">
			<list>
				<bean parent="FieldDefinition" p:attributeName="name" />
				<bean parent="FieldDefinition" p:attributeName="localReference" />
				<bean parent="FieldDefinition" p:attributeName="courtReference" />
				<bean parent="FieldDefinition" p:attributeName="statusId" />
			</list>
		</property>
		<property name="resultFields">
			<list>
				<bean parent="FieldDefinition" p:attributeName="name" />
				<bean parent="FieldDefinition" p:attributeName="localReference" />
				<bean parent="FieldDefinition" p:attributeName="courtReference" />
				<bean parent="FieldDefinition" p:attributeName="status.status" />
			</list>
		</property>
		<property name="title" value="Case Lookup" />
	</bean>
</beans>
