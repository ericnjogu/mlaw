<?xml version="1.0" encoding="UTF-8"?>
<!-- #%L mlaw %% Copyright (C) 2012, 2013 Eric Njogu (kunadawa@gmail.com) %% This 
	program is free software: you can redistribute it and/or modify it under 
	the terms of the GNU General Public License as published by the Free Software 
	Foundation, either version 3 of the License, or (at your option) any later 
	version. This program is distributed in the hope that it will be useful, 
	but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
	or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for 
	more details. You should have received a copy of the GNU General Public License 
	along with this program. If not, see <http://www.gnu.org/licenses/gpl-3.0.html>. 
	#L% -->
	
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="martinlaw_shared_person_LookupView" abstract="true"
		parent="Uif-LookupView">
		<property name="criteriaFields">
			<list>
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="principalName" />
			</list>
		</property>
		<property name="resultFields">
			<list>
				<bean parent="Uif-DataField" p:propertyName="id" />
				<bean parent="Uif-DataField" p:propertyName="principalName" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_person_inquiry_view" parent="Uif-InquiryView"
		abstract="true">
		<property name="Items">
			<list>
				<bean parent="Uif-Disclosure-GridSection">
					<property name="headerText" value="Details" />
					<property name="items">
						<list>
							<bean parent="Uif-InputField" p:propertyName="id" />
							<!-- hoping an inquiry link will appear here for a drill down on the 
								principal details -->
							<bean parent="Uif-InputField" p:propertyName="person.principalId" />
							<bean parent="Uif-InputField" p:propertyName="principalName" />
						</list>
					</property>
				</bean>
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_client_inquiry_section" parent="Uif-Disclosure-StackedCollectionSection"
		abstract="true">
		<property name="headerText" value="Clients" />
		<property name="propertyName" value="clients" />
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:propertyName="person.principalId" />
				<bean parent="Uif-InputField" p:propertyName="person.name" />
			</list>
		</property>
		<property name="layoutManager.summaryFields">
			<list>
				<value>person.name</value>
			</list>
		</property>
		<property name="layoutManager.summaryTitle" value="Client" />
	</bean>

	<bean id="martinlaw_shared_client-maintenance-section" parent="Uif-StackedCollectionSection"
		abstract="true">
		<property name="headerText" value="Clients" />
		<property name="propertyName" value="clients" />
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:propertyName="principalName">
					<property name="instructionalText">
						<value>
						Click magnifying glass icon to select client. 
						If client does not exist, join the first and last names without a space in between, using lower case letters only.
						</value>
					</property>
				</bean>
					
			</list>
		</property>
		<property name="layoutManager.summaryTitle" value="Client" />
		<property name="layoutManager.summaryFields">
			<list>
				<value>principalName</value>
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_name_description_LookupView" parent="martinlaw_shared_wildcard_lookup_view">
		<property name="criteriaFields">
			<list>
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="name" />
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="description" />
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="wildcardPropertyNames" p:id="mlaw_wcp_nmdsc">
					<property name="control">
      					<bean parent="Uif-HiddenControl">
      						<property name="onDocumentReadyScript" value="jq('#mlaw_wcp_nmdsc_control').val('name,description');"/>
      					</bean>
   					</property>
				</bean>
			</list>
		</property>
		<property name="resultFields">
			<list>
				<bean parent="Uif-DataField" p:propertyName="id" />
				<bean parent="Uif-DataField" p:propertyName="name" />
				<bean parent="Uif-DataField" p:propertyName="description" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_name_description_inquiry_view" parent="Uif-InquiryView">
		<property name="Items">
			<list>
				<ref bean="martinlaw_shared_name_description_inquiry_view_items"/>
			</list>
		</property>
	</bean>
	
	<bean id="martinlaw_shared_name_description_inquiry_view_items" parent="Uif-Disclosure-GridSection">
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:propertyName="id" />
				<bean parent="Uif-InputField" p:propertyName="name" />
				<bean parent="Uif-InputField" p:propertyName="description" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_name_description_maintenance_view" parent="Uif-MaintenanceView">
		<property name="validateClientSide" value="false"/>
		<property name="items">
			<list merge="true">
				<bean parent="Uif-MaintenanceGridSection">
					<property name="items">
						<list>
							<bean parent="Uif-InputField" p:propertyName="name" p:inquiry.enableDirectInquiry="false" />
							<bean parent="Uif-InputField" p:propertyName="description" />
						</list>
					</property>
					<property name="headerText" value="Details" />
				</bean>
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_blank_label_inputfield" abstract="true"
		parent="Uif-InputField">
		<property name="propertyReplacers">
			<list>
				<bean parent="Uif-ConditionalBeanPropertyReplacer"
					p:propertyName="label" p:condition="true" p:replacement="" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_annexes_inquirySection" parent="Uif-Disclosure-StackedCollectionSection">
		<property name="headerText" value="Pre-existing Files, Acknowledged Correspondence" />
		<property name="collectionObjectClass" value="org.kuali.rice.krad.bo.Attachment" />
		<property name="propertyName" value="attachments" />
		<property name="items">
			<list>
				<bean parent="Uif-HorizontalFieldGroup">
					<property name="items">
						<list>
							<bean parent="Uif-LinkField" p:linkText="@{#line.attachmentFileName}">
								<property name="href">
									<value>
										@{#ConfigProperties['application.url']}/kr-krad/@{#view.formPostUrl}?methodToCall=downloadAttById&amp;attachmentId=@{#line.noteIdentifier}&amp;skipViewInit=true&amp;renderFullView=false&amp;dataObjectClassName=org.martinlaw.bo.courtcase.CourtCase
									</value>
								</property>
							</bean>
							<bean parent="Uif-MessageField" p:messageText="@{#line.getAttachmentFileSizeWithUnits()}" />
						</list>
					</property>
				</bean>
			</list>
		</property>
		<property name="layoutManager.summaryFields">
			<list>
				<value>attachmentFileName</value>
			</list>
		</property>
		<property name="layoutManager.summaryTitle" value="Annex" />
	</bean>

	<bean id="martinlaw_shared_assignment_LookupView" abstract="true"
		parent="Uif-LookupView">
		<property name="criteriaFields">
			<list>
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="matterId"
					p:inquiry.enableDirectInquiry="false" />
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="assignees.principalName" />	
			</list>
		</property>
		<property name="resultFields">
			<list>
				<bean parent="Uif-DataField" p:propertyName="id" />
				<bean parent="Uif-DataField" p:propertyName="contract.name" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_matter_info_inquiry" abstract="true"
		parent="Uif-Disclosure-GridSection">
		<property name="layoutManager.numberOfColumns" value="2" />
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:propertyName="id" />
				<bean parent="Uif-InputField" p:propertyName="localReference" />
				<bean parent="Uif-InputField" p:propertyName="name" />
				<bean parent="Uif-InputField" p:propertyName="statusId" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_matter_LookupView" abstract="true"
		parent="martinlaw_shared_wildcard_lookup_view">
		<property name="criteriaFields">
			<list>
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="id" />
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="localReference" />
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="name" />
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="statusId"/>
				<bean parent="Uif-LookupCriteriaInputField" p:propertyName="wildcardPropertyNames" p:id="mlaw_wcp_matter">
					<property name="control">
      					<bean parent="Uif-HiddenControl">
      						<property name="onDocumentReadyScript" value="jq('#mlaw_wcp_matter_control').val('localReference,name');"/>
      					</bean>
   					</property>
				</bean>
			</list>
		</property>
		<property name="resultFields">
			<list>
				<bean parent="Uif-DataField" p:propertyName="id" />
				<bean parent="Uif-DataField" p:propertyName="localReference" />
				<bean parent="Uif-DataField" p:propertyName="name" />
				<bean parent="Uif-DataField" p:propertyName="status.status" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_matter_info_maintenance" abstract="true"
		parent="Uif-MaintenanceGridSection">
		<property name="items">
			<list>
				<bean parent="martinlaw_shared_custom_req_msg_inputfield" p:propertyName="localReference"
					p:instructionalText="e.g. FILES/F16/2010"/>
				<bean parent="martinlaw_shared_custom_req_msg_inputfield" p:propertyName="name"
					p:instructionalText="a descriptive name for this matter">
					<property name="propertyReplacers">
						<list>
							<bean parent="Uif-ConditionalBeanPropertyReplacer"
								p:propertyName="instructionalText" p:condition="#form.docTypeName eq 'CourtCaseMaintenanceDocument'">
								<property name="replacement" value="The parties e.g. One Vs The Other"/>
							</bean>
							<bean parent="Uif-ConditionalBeanPropertyReplacer"
								p:propertyName="instructionalText" p:condition="#form.docTypeName eq 'ConveyanceMaintenanceDocument'">
								<property name="replacement" value="e.g. sale of plot No 10, sale of saloon car KAT 093V"/>
							</bean>
						</list>
					</property>
				</bean>
				<bean parent="martinlaw_shared_custom_req_msg_inputfield" p:propertyName="statusId"
					p:inquiry.enableDirectInquiry="false" p:quickfinder.render="false" />
			</list>
		</property>
	</bean>

	<bean id="martinlaw_shared_matter_id_scriptlookup" parent="martinlaw_shared_matterId_maint_inputField">
		<property name="quickfinder">
			<bean parent="Uif-QuickFinderByScript" />
		</property>
		<property name="quickfinder.fieldConversions">
			<map>
				<entry key="id" value="matterId" />
			</map>
		</property>
	</bean>

	<bean id="martinlaw_shared_matter_id_scriptlookup_refresh" parent="martinlaw_shared_matter_id_scriptlookup"
		p:inquiry.render="true">
		<property name="quickfinder">
			<bean parent="Uif-QuickFinder" />
		</property>
		
	</bean>

	<bean id="martinlaw_shared_work_inquiry_section" parent="Uif-Disclosure-TableCollectionSection">
		<property name="propertyName" value="work" />
		<property name="headerText" value="Work" />
		<property name="layoutManager.renderSequenceField" value="false"/>
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:propertyName="documentInitiatorNetworkId" 
					p:dictionaryObjectEntry="org.kuali.rice.krad.bo.AttributeReferenceDummy" 
					p:dictionaryAttributeName="initiatorNetworkId"/>
				<bean parent="Uif-InputField" p:propertyName="documentHeader.workflowDocument.status"  
					p:dictionaryObjectEntry="org.kuali.rice.krad.bo.AttributeReferenceDummy" 
					p:dictionaryAttributeName="workflowDocumentStatus"/>
				<bean parent="Uif-InputField" p:propertyName="documentHeader.documentDescription"
					p:dictionaryObjectEntry="org.kuali.rice.krad.bo.DocumentHeader"
					p:dictionaryAttributeName="documentDescription"/>
				<bean parent="Uif-InputField" p:propertyName="dateCreated" 
					p:label="Created"
					p:dictionaryObjectEntry="org.kuali.rice.krad.bo.AttributeReferenceDummy" 
					p:dictionaryAttributeName="genericTimestamp"/>
				<bean parent="Uif-InputField" p:propertyName="periodToCompletion" 
					p:label="Time to Complete"
					p:dictionaryObjectEntry="org.kuali.rice.krad.bo.AttributeReferenceDummy" 
					p:dictionaryAttributeName="genericBigText"/>
				<bean parent="Uif-InputField" p:propertyName="periodToApprove" 
					p:label="Time to Approve"
					p:dictionaryObjectEntry="org.kuali.rice.krad.bo.AttributeReferenceDummy" 
					p:dictionaryAttributeName="genericBigText"/>
			</list>
		</property>
		<property name="layoutManager.richTable.templateOptions">
	        <map merge = "true">
	        	<!-- additional config to make the document number sortable numerically -->
	          <entry key="aoColumnDefs" 
	          	value="[{'sSortDataType' : 'dom-text' , 'sType' : 'string', 'aTargets': [0, 1, 2, 3, 4, 5, 7]}, 
	          	{'bSortable' : false, 'aTargets': [6]}]"/>
          	</map>
        </property>
        <property name="layoutManager.richTable.forceAoColumnDefsOverride" value="true"/>
	</bean>

	<bean id="martinlaw_shared_line_docnumber_linkfield" parent="Uif-LinkField"
		abstract="true" p:linkText="@{#line.documentNumber}" p:target="_blank"
		p:label="Document Number" 
		/>
		<!-- p:dictionaryObjectEntry="org.kuali.rice.krad.bo.DocumentHeader" 
		p:dictionaryAttributeName="documentNumber" -->
	
	<bean id="martinlaw_shared_work_inquiry_item_group" parent="Uif-VerticalFieldGroup"
		p:render="@{#line.statusIsFinal}" abstract="true">
		<property name="fieldLabel.labelText" value="@{#line.documentHeader.documentDescription}"/>
		<property name="items">
			<list>
				<bean parent="Uif-InputField" p:propertyName="documentHeader.explanation" />
			</list>
		</property>
	</bean>
	
	<!-- use a double asterix to show that required info is expected on route - to be explained in user manual -->
	<bean id="martinlaw_shared_custom_req_msg_inputfield" parent="Uif-InputField" abstract="true">
		<property name="fieldLabel.requiredMessage.messageText" value="**"/>
	</bean>
	
	<bean id="martinlaw_shared_matterId_maint_inputField" parent="martinlaw_shared_custom_req_msg_inputfield" 
		p:propertyName="matterId">
		<property name="propertyNamesForAdditionalDisplay" value="matter.name" />
	</bean>
	
	<bean id="martinlaw_shared_conveyance_annex_type_tbl" parent="Uif-Disclosure-TableCollectionSection">
	   <property name="headerText" value="Documents Required"/>
	   <property name="collectionObjectClass" value="org.martinlaw.bo.conveyance.ConveyanceAnnexType"/>
	   <property name="propertyName" value="annexTypes"/>
	   <property name="layoutManager.sequencePropertyName" value="sequence" />
	   <property name="layoutManager.renderSequenceField" value="false"/>
	   <property name="items">
	     <list>
	     	<bean parent="Uif-InputField" p:propertyName="sequence"/>
			<bean parent="Uif-InputField" p:propertyName="name"/>
			<bean parent="Uif-InputField" p:propertyName="description"/>
	     </list>
	   </property>
	 </bean>
	 
	 <bean id="martinlaw_shared_wildcard_lookup_view" abstract="true" parent="Uif-LookupView">
	 	<property name="viewHelperServiceClass" value="org.martinlaw.web.WildcardLookupableImpl"/>
	 </bean>
</beans>
