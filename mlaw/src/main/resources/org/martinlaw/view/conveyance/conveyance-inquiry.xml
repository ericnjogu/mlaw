<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="conveyance_inquiry_view" parent="Uif-InquiryView">
		<property name="headerText" value="Conveyance Inquiry" />
		<property name="dataObjectClassName" value="org.martinlaw.bo.conveyance.Conveyance" />
		<property name="formPostUrl" value="inquiryWithAtts" />
		<property name="Items">
			<list>
				<bean parent="martinlaw_shared_matter_info_inquiry">
					<property name="headerText" value="Conveyance Information" />
					<property name="items">
						<list merge="true">
							<bean parent="Uif-InputField" p:propertyName="type.name" />						
						</list>
					</property>
				</bean>

				<bean parent="Uif-Disclosure-StackedCollectionSection">
					<property name="headerText" value="Annexes" />
					<property name="collectionObjectClass" value="org.martinlaw.bo.conveyance.ConveyanceAnnex" />
					<property name="propertyName" value="annexes" />
					<property name="items">
						<list>
							<bean parent="Uif-InputField" p:propertyName="type.name" />
						</list>
					</property>
					<property name="layoutManager.summaryFields">
						<list>
							<value>type.name</value>
						</list>
					</property>
					<property name="layoutManager.summaryTitle" value="Annex" />
					<property name="subCollections">
						<list>
							<bean parent="Uif-StackedSubCollection-WithinSection">
								<property name="headerText" value="Attachments" />
								<property name="collectionObjectClass" value="org.martinlaw.bo.conveyance.ConveyanceAttachment" />
								<property name="propertyName" value="attachments" />
								<property name="items">
									<list>
										<bean parent="Uif-HorizontalFieldGroup" p:render="@{!#empty(#line.attachment)}">
											<property name="items">
												<list>
													<bean parent="Uif-LinkField" p:linkText="@{#line.filename}">
														<property name="href">
															<value>
																@{#ConfigProperties['application.url']}/kr-krad/@{#view.formPostUrl}?methodToCall=downloadAttById&amp;attachmentId=@{#line.attachment?.noteIdentifier}&amp;skipViewInit=true&amp;renderFullView=false&amp;dataObjectClassName=org.martinlaw.bo.conveyance.Conveyance
															</value>
														</property>
													</bean>
													<bean parent="Uif-MessageField"
														p:messageText="@{#line.attachment?.getAttachmentFileSizeWithUnits()}" />
												</list>
											</property>
										</bean>
									</list>
								</property>
								<property name="layoutManager.summaryFields">
									<list>
										<value>filename</value>
									</list>
								</property>
								<property name="layoutManager.summaryTitle" value="Attachment" />
							</bean>
						</list>
					</property>
				</bean>

				<bean parent="martinlaw_shared_client_inquiry_section">
					<property name="collectionObjectClass" value="org.martinlaw.bo.conveyance.ConveyanceClient" />
				</bean>

				<bean parent="martinlaw_shared_fee_inquiry_section">
					<property name="collectionObjectClass" value="org.martinlaw.bo.conveyance.ConveyanceFee" />
				</bean>
				
				<bean parent="martinlaw_shared_assignment_inquiry_view_assignees">
					<property name="collectionObjectClass"
						value="org.martinlaw.bo.conveyance.Assignee" />
				</bean>
				
				<bean parent="martinlaw_shared_work_inquiry_section">
					<property name="collectionObjectClass" value="org.martinlaw.bo.conveyance.Work" />
					<property name="items">
						<list merge="true">
							<bean parent="martinlaw_shared_work_docnumber_linkfield">
								<property name="href">
									<value>
										@{#ConfigProperties['dochandler_conveyance_work']}&amp;docId=@{#line.documentNumber}&amp;command=displayDocSearchView
									</value>
								</property>
							</bean>
						</list>
					</property>
				</bean>
			</list>
		</property>
	</bean>
</beans>
