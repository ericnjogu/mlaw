<?xml version="1.0" encoding="UTF-8"?>
<!-- #%L mlaw %% Copyright (C) 2012 Eric Njogu (kunadawa@gmail.com) %% This 
	program is free software: you can redistribute it and/or modify it under 
	the terms of the GNU General Public License as published by the Free Software 
	Foundation, either version 3 of the License, or (at your option) any later 
	version. This program is distributed in the hope that it will be useful, 
	but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY 
	or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for 
	more details. You should have received a copy of the GNU General Public License 
	along with this program. If not, see <http://www.gnu.org/licenses/gpl-3.0.html>. 
	#L% -->

<data xmlns="ns:workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="ns:workflow resource:WorkflowData">

	<documentTypes xmlns="ns:workflow/DocumentType"
		xsi:schemaLocation="ns:workflow/DocumentType resource:DocumentType">
		<documentType>
			<name>CourtCaseMaintenanceDocument</name>
			<parent>RiceDocument</parent>
			<description>Case Maintenance Document</description>
			<label>Case Maintenance Document</label>
			<postProcessorName>org.kuali.rice.krad.workflow.postprocessor.KualiPostProcessor</postProcessorName>
			<blanketApproveGroupName namespace="MARTINLAW">lawyer</blanketApproveGroupName>
			<defaultExceptionGroupName namespace="KR-WKFLW">WorkflowAdmin</defaultExceptionGroupName>
			<docHandler>${application.url}/kr-krad/maintenance?methodToCall=docHandler</docHandler>
			<routePaths>
				<routePath>
					<start name="Initiated" nextNode="approvalNode" />
					<requests name="approvalNode" />
				</routePath>
			</routePaths>
			<routeNodes>
				<start name="Initiated">
					<activationType>P</activationType>
					<mandatoryRoute>false</mandatoryRoute>
					<finalApproval>false</finalApproval>
				</start>
				<requests name="approvalNode">
					<activationType>P</activationType>
					<ruleTemplate>org.martinlaw.defaultApprovalTemplate</ruleTemplate>
					<mandatoryRoute>false</mandatoryRoute>
					<finalApproval>false</finalApproval>
				</requests>
			</routeNodes>
			<attributes>
				<attribute>
					<name>MlawDataDictionarySearchableAttribute</name>
				</attribute>
			</attributes>
		</documentType>
	</documentTypes>
	<rules xmlns="ns:workflow/Rule" xsi:schemaLocation="ns:workflow/Rule resource:Rule">
		<!-- case rule -->
		<rule>
			<name>org.martinlaw.rules.case</name>
			<documentType>CourtCaseMaintenanceDocument</documentType>
			<ruleTemplate>org.martinlaw.defaultApprovalTemplate</ruleTemplate>
			<description>Routing rule for case maintenance</description>
			<responsibilities>
				<responsibility>
					<groupName namespace="MARTINLAW">lawyer</groupName>
					<actionRequested>A</actionRequested>
					<priority>1</priority>
				</responsibility>
			</responsibilities>
		</rule>
	</rules>
	
	<ruleAttributes xmlns="ns:workflow/RuleAttribute" xsi:schemaLocation="ns:workflow/RuleAttribute resource:RuleAttribute">
		<ruleAttribute>
			<name>matter_courtReference</name>
			<className>org.kuali.rice.kew.docsearch.xml.StandardGenericXMLSearchableAttribute</className>
			<label>courtReference</label>
			<description>The court number</description>
			<type>SearchableXmlAttribute</type>
			<searchingConfig>
				<fieldDef name="courtReference" title="Court Case Number">
					<display>
						<type>text</type>
					</display>
					<visibility>
						<column visible="true"/>
					</visibility>
					<searchDefinition dataType="string" rangeSearch="false"/>
					<fieldEvaluation>
						<xpathexpression>//courtReference</xpathexpression>
					</fieldEvaluation>
				</fieldDef>
				<xmlSearchContent>
					<mlaw-content>
						<courtReference>
							%courtReference%
						</courtReference>
					</mlaw-content>
				</xmlSearchContent>
			</searchingConfig>
		</ruleAttribute>
	</ruleAttributes>
</data>
	
